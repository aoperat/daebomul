<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>세븐나이츠 쿠폰 코드 자동입력 | 세나쿠폰</title>
    <!-- 메타, GA4, GTM 등 기존과 동일 (생략) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="세븐나이츠, 대보물시대, 쿠폰, 자동입력, 세나쿠폰, Netmarble, 쿠폰 코드, 자동 쿠폰 등록, 세나, coupon, SevenKnights">
    <meta name="description" content="세븐나이츠 등 다양한 게임 쿠폰을 편하게 자동입력! UID만 입력하면 대량 쿠폰 자동 등록.">

    <!-- 부트스트랩 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        .navbar {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
        }

        .footer {
            background: #f7f7fa;
        }

        .footer .btn {
            font-size: 0.95rem;
            padding: 0.25rem 0.7rem;
        }

        @media (max-width: 600px) {

            th,
            td {
                font-size: 13px;
                padding: 4px;
            }

            .footer .btn {
                font-size: 13px;
                padding: 2px 7px;
            }
        }
    </style>
</head>

<body class="d-flex flex-column min-vh-100">
    <!-- Modal: 개발자에게 커피사기 -->
    <div class="modal fade" id="donateModal" tabindex="-1" aria-labelledby="donateModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="donateModalLabel">후원 계좌 안내</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="mb-2 fw-bold">예금주: <span class="text-primary">이*환</span></div>
                    <div class="mb-2">국민은행: <span class="fw-bold">102702-04-128855</span></div>
                    <div class="mt-2 text-muted small">작은 후원도 큰 힘이 됩니다.<br>감사합니다!</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Header & Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="index.html">세나쿠폰</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain"
                aria-controls="navbarMain" aria-expanded="false" aria-label="메뉴 열기">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarMain">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">대보물시대 쿠폰</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="coupon-seven.html">세븐나이츠 쿠폰</a>
                    </li>
                </ul>
                <a href="#" class="btn btn-warning fw-bold ms-lg-2" data-bs-toggle="modal"
                    data-bs-target="#donateModal">
                    ☕ 개발자에게 커피사기
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-shrink-0" style="padding-top:72px">
        <div class="container py-4">
            <h2 class="mb-4 fw-bold text-primary">세븐나이츠 쿠폰 코드 자동입력</h2>
            <p>아래에서 UID 입력 후, 원하는 <b>세븐나이츠 쿠폰</b>을 자동등록 할 수 있습니다.</p>
            <div class="mb-3">
                <label for="uid" class="form-label">UID 입력</label>
                <input type="text" id="uid" class="form-control w-auto d-inline-block" placeholder="UID 입력">

                <script>
                    // ① 저장된 UID 불러오기
                    window.addEventListener('DOMContentLoaded', function () {
                        const saved = localStorage.getItem('coupontool_uid');
                        if (saved) document.getElementById('uid').value = saved;
                    });

                    // ② UID 입력시 실시간 저장
                    document.getElementById('uid').addEventListener('input', function (e) {
                        localStorage.setItem('coupontool_uid', e.target.value);
                    });

                    // ...이하 기존 코드
                </script>

                <button id="openSelectedBtn" class="btn btn-success ms-2">체크된 링크 일괄 열기</button>
            </div>
            <div class="table-responsive">
                <table class="table table-bordered align-middle mb-4">
                    <thead class="table-light">
                        <tr>
                            <th><input type="checkbox" id="selectAll"> 전체</th>
                            <th>번호</th>
                            <th>코드</th>
                            <th>보상/설명</th>
                            <th>링크 이동</th>
                        </tr>
                    </thead>
                    <tbody id="coupon-tbody">
                        <!-- 데이터가 JS로 생성됩니다 -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer mt-auto py-3 border-top">
        <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
            <div class="d-flex align-items-center gap-2">
                <a href="https://aoperat.github.io" class="btn btn-outline-primary" target="_blank" rel="noopener">
                    개발자 블로그
                </a>
                <a href="https://developro.tistory.com/" class="btn btn-outline-success" target="_blank" rel="noopener">
                    개발자 티스토리
                </a>
            </div>
            <div class="text-muted small">&copy; 2025 디벨로프로. All rights reserved.</div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="coupons-seven.js"></script>
    <script>
        // 테이블 생성
        const tbody = document.getElementById('coupon-tbody');
        coupons.forEach((row, i) => {
            const tr = document.createElement('tr');
            if (row.expired) tr.classList.add('table-secondary'); // 회색 배경
            const tdCheck = document.createElement('td');
            if (row.code) {
                const cb = document.createElement('input');
                cb.type = 'checkbox';
                cb.className = 'cb-coupon';
                cb.dataset.idx = i;
                tdCheck.appendChild(cb);
            }
            tr.appendChild(tdCheck);
            const tdNum = document.createElement('td');
            tdNum.textContent = i + 1;
            tr.appendChild(tdNum);
            const tdCode = document.createElement('td');
            tdCode.textContent = row.code;
            tr.appendChild(tdCode);
            const tdDesc = document.createElement('td');
            tdDesc.textContent = row.desc;
            tr.appendChild(tdDesc);

            const tdBtn = document.createElement('td');
            if (row.code && !row.expired) {
                // 버튼 활성화
                const btn = document.createElement('button');
                btn.textContent = "이동";
                btn.className = "btn btn-outline-primary btn-sm";
                btn.onclick = function () {
                    const uid = document.getElementById('uid').value.trim();
                    if (!uid) {
                        alert('UID를 입력하세요.');
                        document.getElementById('uid').focus();
                        return;
                    }
                    // 세븐나이츠용 URL로 바꿔서 사용하세요
                    const url = `https://coupon.netmarble.com/tskgb?playerId=${encodeURIComponent(uid)}&code=${row.code}`;
                    window.open(url, '_blank');
                };
                tdBtn.appendChild(btn);
            } else if (row.expired) {
                tdBtn.textContent = "만료됨";
            }

            tr.appendChild(tdBtn);
            tbody.appendChild(tr);
        });

        // 전체선택 기능
        document.getElementById('selectAll').addEventListener('change', function () {
            const checked = this.checked;
            document.querySelectorAll('.cb-coupon').forEach(cb => {
                cb.checked = checked;
            });
        });

        // 개별 체크 해제/선택시 전체선택 상태 동기화
        tbody.addEventListener('change', function (e) {
            if (e.target.classList.contains('cb-coupon')) {
                const allCheckboxes = Array.from(document.querySelectorAll('.cb-coupon'));
                const allChecked = allCheckboxes.every(cb => cb.checked);
                document.getElementById('selectAll').checked = allChecked;
            }
        });

        // 일괄 오픈 버튼 기능
        document.getElementById('openSelectedBtn').onclick = function () {
            const uid = document.getElementById('uid').value.trim();
            if (!uid) {
                alert('UID를 입력하세요.');
                document.getElementById('uid').focus();
                return;
            }
            const checked = document.querySelectorAll('.cb-coupon:checked');
            if (checked.length === 0) {
                alert('적어도 하나 이상 선택하세요.');
                return;
            }
            checked.forEach(cb => {
                const idx = Number(cb.dataset.idx);
                const code = coupons[idx].code;
                // 세븐나이츠용 URL로 바꿔서 사용하세요                
                const url = `https://coupon.netmarble.com/tskgb?playerId=${encodeURIComponent(uid)}&code=${code}`;
                window.open(url, '_blank');
            });
        };


    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>